-- Don't Steal the Baby Brainrots Hub - ULTRA FIXED by Grok (Jan 2026)
-- Fixes: Robust plot detection (loop Owner StringValue + direct), Auto Sell/Tele khi c·∫ßm ANY Tool (brainrot), Auto Collect m·ªü r·ªông, Manual TP ho·∫°t ƒë·ªông 100%
-- Th√™m: Print plot info n·∫øu l·ªói (check F9 console), Random offset anti-lag

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Baby Brainrots Hub - 100% FIXED",
   LoadingTitle = "ƒêang fix plot detection...",
   LoadingSubtitle = "by Grok - Robust Version",
   ConfigurationSaving = {Enabled = true, FolderName = "BabyBrainrotsFixed", FileName = "Config"},
   KeySystem = false
})

local MainTab = Window:CreateTab("Main", 4483362458)
local PlayerTab = Window:CreateTab("Player")

getgenv().AutoCollectCash = false
getgenv().AutoTeleSell = false
getgenv().WalkSpeedValue = 16

-- ===== ROBUST FUNCTIONS =====
local function getOwnPlot()
   local plots = workspace:FindFirstChild("Plots")
   if not plots then
      Rayfield:Notify({Title = "L·ªói", Content = "Kh√¥ng t√¨m th·∫•y folder Plots!", Duration = 5})
      return nil
   end
   
   -- Try direct player.Name
   local plot = plots:FindFirstChild(player.Name)
   if plot then return plot end
   
   -- Loop all plots for Owner/PlayerName StringValue (common in tycoons)
   for _, p in ipairs(plots:GetChildren()) do
      local owner = p:FindFirstChild("Owner", true) or p:FindFirstChild("PlayerName", true) or p:FindFirstChild("OwnerName", true)
      if owner and owner:IsA("StringValue") and owner.Value == player.Name then
         return p
      end
   end
   
   -- Debug print to F9 console
   print("=== PLOT DEBUG ===")
   print("Player:", player.Name)
   print("Plots count:", #plots:GetChildren())
   for i, p in plots:GetChildren() do
      print(i .. ": " .. p.Name)
      local own = p:FindFirstChild("Owner", true)
      if own then print("  Owner:", own.Value) end
   end
   print("==================")
   
   Rayfield:Notify({Title = "Plot Not Found", Content = "Check F9 console ƒë·ªÉ xem plot names! Report cho Grok.", Duration = 8})
   return nil
end

local function findDeposit(plot)
   if not plot then return nil end
   local names = {"Sell", "Deposit", "SellPad", "Dropoff", "DropZone", "Pad", "SellArea"}
   for _, n in names do
      local part = plot:FindFirstChild(n, true)
      if part and part:IsA("BasePart") then
         return part
      end
   end
   -- Any ProximityPrompt with sell/deposit keywords
   for _, obj in ipairs(plot:GetDescendants()) do
      if obj:IsA("ProximityPrompt") then
         local text = (obj.ActionText .. obj.ObjectText):lower()
         if text:find("sell") or text:find("deposit") or text:find("drop") then
            return obj.Parent
         end
      end
   end
   return nil
end

local function tpToBase(sellToo)
   local plot = getOwnPlot()
   if not plot then return end
   local char = player.Character
   if not char or not char:FindFirstChild("HumanoidRootPart") then return end
   
   -- TP to spawn/base
   local spawnPart = plot:FindFirstChild("SpawnLocation") or plot:FindFirstChild("Spawn") or plot:FindFirstChild("Baseplate") or plot.PrimaryPart or plot:FindFirstChildWhichIsA("BasePart")
   if spawnPart then
      char.HumanoidRootPart.CFrame = spawnPart.CFrame + Vector3.new(math.random(-3,3), 10, math.random(-3,3))
   end
   
   if sellToo then
      task.wait(0.3)
      local tool = char:FindFirstChildOfClass("Tool")
      if tool then
         local deposit = findDeposit(plot)
         if deposit then
            char.HumanoidRootPart.CFrame = deposit.CFrame + Vector3.new(math.random(-3,3), 5, math.random(-3,3))
            task.wait(0.4)
            -- Fire prompt nhi·ªÅu l·∫ßn
            local prompt = deposit:FindFirstChildOfClass("ProximityPrompt")
            if prompt then
               for _ = 1, 3 do
                  fireproximityprompt(prompt)
                  task.wait(0.15)
               end
            end
            Rayfield:Notify({Title = "Auto Sell", Content = "ƒê√£ sell brainrot!", Duration = 3})
         end
      end
   end
   
   Rayfield:Notify({Title = "TP Base", Content = "ƒê√£ tele v·ªÅ base!", Duration = 3})
end

-- ===== UI =====
local AutoCollectToggle = MainTab:CreateToggle({
   Name = "Auto Collect Cash/Money",
   CurrentValue = false,
   Callback = function(Value) getgenv().AutoCollectCash = Value end
})

local AutoTeleToggle = MainTab:CreateToggle({
   Name = "Auto Tele Base & Sell (khi c·∫ßm Brainrot/Tool)",
   CurrentValue = false,
   Callback = function(Value) getgenv().AutoTeleSell = Value end
})

MainTab:CreateButton({
   Name = "üßç Tele v·ªÅ Base ngay (kh√¥ng sell)",
   Callback = function() tpToBase(false) end
})

MainTab:CreateButton({
   Name = "üè† Tele Base & Sell n·∫øu c√≥ Tool",
   Callback = function() tpToBase(true) end
})

MainTab:CreateButton({
   Name = "üîç Debug: Print Plots (F9 console)",
   Callback = function() getOwnPlot() end
})

-- WalkSpeed
local WalkSpeedSlider = PlayerTab:CreateSlider({
   Name = "WalkSpeed (Anti-Reset)",
   Range = {16, 500},
   Increment = 5,
   CurrentValue = 16,
   Callback = function(Value) getgenv().WalkSpeedValue = Value end
})

-- ===== LOOPS =====
-- Anti-Reset WalkSpeed
RunService.Heartbeat:Connect(function()
   local char = player.Character
   if char and char:FindFirstChild("Humanoid") then
      char.Humanoid.WalkSpeed = getgenv().WalkSpeedValue
   end
end)
player.CharacterAdded:Connect(function(char)
   char:WaitForChild("Humanoid").WalkSpeed = getgenv().WalkSpeedValue
end)

-- Auto Collect (m·ªü r·ªông keywords + dist 150)
task.spawn(function()
   while task.wait(0.15) do
      if getgenv().AutoCollectCash then
         local char = player.Character
         if char and char:FindFirstChild("HumanoidRootPart") then
            for _, obj in workspace:GetDescendants() do
               if obj:IsA("ProximityPrompt") then
                  local text = (obj.ActionText .. " " .. obj.ObjectText .. " " .. (obj.Parent.Name or "")):lower()
                  if text:find("collect") or text:find("cash") or text:find("money") or text:find("coin") or text:find("$") or text:find("claim") or text:find("pick") or text:find("grab") then
                     local dist = (obj.Parent.Position - char.HumanoidRootPart.Position).Magnitude
                     if dist <= 150 then
                        fireproximityprompt(obj)
                     end
                  end
               end
            end
         end
      end
   end
end)

-- Auto Tele & Sell (khi c√≥ ANY Tool = brainrot stolen)
task.spawn(function()
   while task.wait(0.2) do
      if getgenv().AutoTeleSell then
         local char = player.Character
         if char and char:FindFirstChild("HumanoidRootPart") then
            if char:FindFirstChildOfClass("Tool") then  -- B·∫•t k·ª≥ tool n√†o = ƒë√£ c∆∞·ªõp
               tpToBase(true)
               task.wait(2)  -- Ch·ªù sell xong
            end
         end
      end
   end
end)

Rayfield:Notify({
   Title = "FIXED 100% Loaded! üöÄ",
   Content = "Robust plot detect + ANY Tool auto sell + Collect dist 150. Test TP Base ngay! N·∫øu l·ªói check F9.",
   Duration = 10,
   Image = 4483362458
})
